(this["webpackJsonpbuzztwitter-admin"]=this["webpackJsonpbuzztwitter-admin"]||[]).push([[0],{61:function(e,t,r){},92:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(15),s=r.n(a),c=r(19),o=r(22),i=r(6),u=r.p+"static/media/logo.6ce24c58.svg",l=(r(61),r(2)),p=function(){Object(c.c)((function(e){return e.auth.token}));return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)("header",{className:"App-header",children:[Object(l.jsx)("img",{src:u,className:"App-logo",alt:"logo"}),Object(l.jsxs)("p",{children:["Edit ",Object(l.jsx)("code",{children:"src/App.tsx"})," and save to reload."]}),Object(l.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})})},d=r(16),j=r(3),O=r.n(j),b=r(5),h=r(11),S=r(96),_=r(95),m=r(50),f=r(18),E=r(17),g=r(52),v=r(51),T=r(46),x=r.n(T),A=new(function(e){Object(g.a)(r,e);var t=Object(v.a)(r);function r(){var e;Object(E.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).getToken=function(){var t=Object(b.a)(O.a.mark((function t(r,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.engine.post("/api/admin/token",{email:r,password:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.logout=function(){var t=Object(b.a)(O.a.mark((function t(r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.engine.post("/api/admin/logout",{},{headers:{Authorization:"Bearer ".concat(r)}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.refresh=function(){var t=Object(b.a)(O.a.mark((function t(r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.engine.post("/api/admin/refresh",{},{headers:{Authorization:"Bearer ".concat(r)}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.me=function(){var t=Object(b.a)(O.a.mark((function t(r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.engine.post("/api/admin/me",{},{headers:{Authorization:"Bearer ".concat(r)}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return r}((function e(){Object(E.a)(this,e),this.url="",this.token="",this.engine=void 0,this.engine=x.a.create({baseURL:"http://localhost:10091",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","Access-Control-Allow-Origin":"*"},responseType:"json"}),this.engine.interceptors.response.use((function(e){return Promise.resolve(e)}),(function(e){var t,r;if(401!==(null===(t=e.response)||void 0===t?void 0:t.status))return Promise.reject(e);"/api/admin/me"!=(null===(r=e.response)||void 0===r?void 0:r.config.url)&&(localStorage.removeItem(String(Object({NODE_ENV:"production",PUBLIC_URL:"/test-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"http://localhost:10091"}).REACT_LOCAL_STORAGE_NAME)),sessionStorage.removeItem(String(Object({NODE_ENV:"production",PUBLIC_URL:"/test-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"http://localhost:10091"}).REACT_SESSION_STORAGE_NAME)),window.location.href="/login")}))}))),R={token:localStorage.getItem(String(Object({NODE_ENV:"production",PUBLIC_URL:"/test-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"http://localhost:10091"}).REACT_LOCAL_STORAGE_NAME))||sessionStorage.getItem(String(Object({NODE_ENV:"production",PUBLIC_URL:"/test-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"http://localhost:10091"}).REACT_SESSION_STORAGE_NAME))||"",error:null},C=Object(f.b)("auth/getToken",function(){var e=Object(b.a)(O.a.mark((function e(t,r){var n,a,s,c,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,a=t.email,s=t.password,e.next=5,A.getToken(a,s);case 5:return c=e.sent,e.abrupt("return",{token:c.data.access_token,error:null});case 9:if(e.prev=9,e.t0=e.catch(1),(o=e.t0).response){e.next=14;break}throw e.t0;case 14:return e.abrupt("return",n(o.response.data));case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()),w=Object(f.b)("auth/logout",function(){var e=Object(b.a)(O.a.mark((function e(t,r){var n,a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.rejectWithValue,e.prev=1,a=t.token,e.next=5,A.logout(a);case 5:return e.sent,e.abrupt("return",{token:"",error:null});case 9:if(e.prev=9,e.t0=e.catch(1),(s=e.t0).response){e.next=14;break}throw e.t0;case 14:return e.abrupt("return",n(s.response.data));case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}()),N=Object(f.c)({name:"auth",initialState:R,reducers:{setAuthState:function(e,t){return t.payload}},extraReducers:function(e){e.addCase(C.fulfilled,(function(e,t){e.token=t.payload.token})),e.addCase(C.rejected,(function(e,t){t.payload?e.error=t.payload.errorMessage:e.error=t.error.message})),e.addCase(w.fulfilled,(function(e,t){e.token=t.payload.token})),e.addCase(w.rejected,(function(e,t){t.payload?e.error=t.payload.errorMessage:e.error=t.error.message}))}}),k=r(47),P=r.n(k),L=function(){var e=Object(m.a)(),t=e.register,r=e.formState.errors,a=e.handleSubmit,s=Object(n.useState)(!1),u=Object(h.a)(s,2),p=u[0],j=u[1],f=Object(n.useState)(!1),E=Object(h.a)(f,2),g=E[0],v=E[1],T=Object(n.useState)(!0),x=Object(h.a)(T,2),R=x[0],w=x[1],N=Object(n.useState)(!0),k=Object(h.a)(N,2),L=k[0],y=k[1],D=Object(i.f)(),F=Object(c.b)(),W=Object(c.c)((function(e){return e.auth.token}));Object(n.useEffect)((function(){""!=W&&L?A.me(W).then((function(e){window.location.href="/"})).catch((function(e){w(!1)})):""==W&&w(!1),y(!1)}));var H=function(){var e=Object(b.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,F(C({email:t.email,password:t.password}));case 3:r=e.sent,v(!1),C.fulfilled.match(r)?(t.persist?localStorage.setItem(String(Object({NODE_ENV:"production",PUBLIC_URL:"/test-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"http://localhost:10091"}).REACT_LOCAL_STORAGE_NAME),r.payload.token):sessionStorage.setItem(String(Object({NODE_ENV:"production",PUBLIC_URL:"/test-pages",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"http://localhost:10091"}).REACT_SESSION_STORAGE_NAME),r.payload.token),D.push("/")):j(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(P.a,{className:"full-modal",ariaHideApp:!1,isOpen:R,children:Object(l.jsx)(l.Fragment,{})}),Object(l.jsxs)("div",{id:"header",children:[Object(l.jsx)("h1",{children:"\u30ed\u30b0\u30a4\u30f3"}),Object(l.jsx)("div",{className:"arrow-pos",children:Object(l.jsx)(o.b,{to:"/login_signup",className:"l-arrow"})})]}),Object(l.jsxs)("div",{id:"main-content",children:[Object(l.jsx)(S.a,{variant:"danger",show:p,onClose:function(){return j(!1)},dismissible:!0,children:Object(l.jsx)("p",{children:"\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002"})}),Object(l.jsx)("div",{className:"signup-area",children:Object(l.jsxs)("form",{onSubmit:a(H),children:[Object(l.jsx)("p",{className:"mb10",children:Object(l.jsx)("label",{htmlFor:"",children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"})}),Object(l.jsx)("input",Object(d.a)({type:"email",className:"mb30"},t("email",{required:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306f\u5fc5\u9808\u3067\u3059\u3002"}))),r.email&&Object(l.jsx)(S.a,{variant:"danger",children:r.email.message}),Object(l.jsx)("p",{className:"mb10",children:Object(l.jsx)("label",{htmlFor:"",children:"\u30d1\u30b9\u30ef\u30fc\u30c9"})}),Object(l.jsx)("input",Object(d.a)({type:"password",className:"mb10"},t("password",{required:"\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u5fc5\u9808\u3067\u3059\u3002"}))),r.password&&Object(l.jsx)(S.a,{variant:"danger",children:r.password.message}),Object(l.jsx)("div",{className:"checkbox-area mb40",children:Object(l.jsxs)("label",{children:[Object(l.jsx)("input",Object(d.a)({type:"checkbox",className:"checkbox-input"},t("persist",{required:!0}))),Object(l.jsx)("span",{className:"checkbox-parts",children:"\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3092\u4fdd\u6301\u3059\u308b"})]})}),Object(l.jsx)("div",{className:"button-bottom-area",children:Object(l.jsx)(_.a,{variant:"patient-primary",type:"submit",block:!0,disabled:g,children:"\u30ed\u30b0\u30a4\u30f3"})})]})})]})]})},y=function(){return Object(l.jsx)(o.a,{children:Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{exact:!0,path:"/",children:Object(l.jsx)(p,{})}),Object(l.jsx)(i.a,{path:"/login",children:Object(l.jsx)(L,{})})]})})},D=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,97)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),s(e),c(e)}))},F=r(14),W=Object(f.c)({name:"signup",initialState:{email:"",password:""},reducers:{saveEmail:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{email:t.payload})},savePassword:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{password:t.payload})}}}),H=Object(F.b)({signup:W.reducer,auth:N.reducer}),U=Object(f.a)({reducer:H});s.a.render(Object(l.jsx)(o.a,{basename:"/test-pages",children:Object(l.jsx)(c.a,{store:U,children:Object(l.jsx)(y,{})})}),document.getElementById("main-wrap")),D()}},[[92,1,2]]]);
//# sourceMappingURL=main.693cd7e3.chunk.js.map